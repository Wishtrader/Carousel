$.fn.carousel=function(e){var t=$.extend(!0,{slidesToShow:3,focusedCenter:!1,focusedCenterArea:"40%",slideMargin:15,endless:!1,endlessDirection:"left",autoplay:!0,autoplayPause:5e3,autoplayRestore:1e4,duration:600,restoreTimeout:0,update:!1,easing:"easeInOutCubic",btnLeft:'<a class="fa-stack"><i class="fa fa-circle fa-stack-2x" /><i class="fa fa-angle-left fa-stack-1x" /></a>',btnRight:'<a class="fa-stack"><i class="fa fa-circle fa-stack-2x" /><i class="fa fa-angle-right fa-stack-1x" /></a>',cssBtnLeft:"carousel-arrow-left",cssBtnRight:"carousel-arrow-right",cssFrame:"frame",cssBox:"ul",cssSlide:"li",cssActive:"active",responsive:{768:{slidesToShow:2},480:{slidesToShow:1,focusedCenterArea:"100%",slideMargin:0}}},e);return this.each(function(){var e,s,i,a,n,o,r,l,c,f,d,u,h,g,p=$(this),m="id"+(new Date).getTime()+Math.floor(1e6*Math.random()+1),v=[],w=!1,T=function(){p.find("img").css({display:"block"}),M(),y(),$(window).off("resize.carousel"+m).on("resize.carousel"+m,k),x()},M=function(){Object.keys(t.responsive).length&&($.each(t.responsive,function(e){v.push(e)}),v.sort(function(e,t){return e-t}))},y=function(){if(v.length)for(var s=window.innerWidth,i=0,a=v.length;a>i;i++){if(s<=v[i]){var n=v[i];e=$.extend({},t,t.responsive[n]);break}i===a-1&&(e=$.extend({},t))}else e=$.extend({},t)},k=function(){w===!1?w=!0:(clearTimeout(w),w=setTimeout(x,1e3))},x=function(){C(),y(),s=p.find("."+e.cssFrame),i=s.find(e.cssBox),a=i.find(e.cssSlide),n=e.focusedCenter&&e.slidesToShow%2,S(),f.on("click.carousel"+m,function(){F("left")}),d.on("click.carousel"+m,function(){F("right")}),e.endless&&(e.autoplay=!1,e.easing="linear",p.on("mouseenter.carousel"+m,P).on("mouseleave.carousel"+m,z),e.update?z():F(e.endlessDirection)),e.autoplay&&(u=setInterval(F,e.autoplayPause),p.on("mouseenter.carousel"+m,O).on("mouseleave.carousel"+m,j))},C=function(){O(),P(),e.update||(s&&s.css({maxWidth:""}),i&&i.css({maxWidth:"",left:0})),f&&f.off("click.carousel"+m),d&&d.off("click.carousel"+m),(e.endless||e.autoplay)&&p.off("mouseenter.carousel"+m).off("mouseleave.carousel"+m)},S=function(){A(),b(),D(),B(),I(),L()},A=function(){var t=Math.round(s.width());if(n){c=Math.floor(t*parseInt(e.focusedCenterArea)/100);var i=Math.floor(t-(c+e.slideMargin));o=1===e.slidesToShow?c+e.slideMargin:Math.floor((i+e.slideMargin)/(e.slidesToShow-1))}else o=Math.floor((t+e.slideMargin)/e.slidesToShow)},b=function(){r=o-e.slideMargin,a.css({width:r,marginRight:e.slideMargin})},D=function(){n&&(a.removeClass(e.cssActive),l=a.eq(Math.ceil(e.slidesToShow/2)-1),l.addClass(e.cssActive).css({width:c}),p.attr({"data-focused-width":c,"data-slide-width":r}))},B=function(){R(s,e.slidesToShow),R(i,a.length),n&&i.height(l.height())},R=function(t,i){var n=0;a.filter(":lt("+i+")").each(function(){n+=$(this).width()+e.slideMargin}),t.is(s)&&(n-=e.slideMargin),t.css({maxWidth:n})},I=function(){if(n){var e=l.siblings(),t=Math.round((i.height()-e.height())/2);a.css({marginTop:0}),e.css({marginTop:t}),p.attr({"data-slide-top":t})}},L=function(){p.find("."+e.cssBtnLeft).length||p.append(e.btnLeft).append(e.btnRight);var t=s.nextAll("a");f=t.filter(":first"),d=t.filter(":last"),f.addClass(e.cssBtnLeft),d.addClass(e.cssBtnRight),e.endless&&f.add(d).hide()},W=function(){var t=parseFloat(i.css("left")),s="right"===e.endlessDirection?-1*(o+t):o+t;if(s){var a=100*s/o;return a/100*e.duration}return e.duration},F=function(t,s,r){if(!i.is(":animated")){if(a=i.find(e.cssSlide),t="undefined"!=typeof t?t:e.endlessDirection,s="undefined"!=typeof s?s:e.duration,r="undefined"!=typeof r?r:!1,n){l=a.filter("."+e.cssActive);var c="left"===t?l.prev():l.next();l.animate({width:p.attr("data-slide-width"),marginTop:p.attr("data-slide-top")},s,e.easing,function(){$(this).removeClass(e.cssActive)}),c.animate({width:p.attr("data-focused-width"),marginTop:0},s,e.easing,function(){$(this).addClass(e.cssActive)})}"right"===t?(r||e.update||(a.last().insertBefore(a.first()),i.css({left:-o})),i.animate({left:0},s,e.easing,function(){e.endless&&"right"===e.endlessDirection&&d.click()})):"left"===t&&i.animate({left:-o},s,e.easing,function(){i.css({left:0}),a.first().insertAfter(a.last()),e.endless&&"left"===e.endlessDirection&&f.click()})}},P=function(){clearTimeout(g),i&&i.stop(),a&&a.stop()},z=function(){g=setTimeout(function(){var t=W();t===e.duration?F(e.endlessDirection):F(e.endlessDirection,t,!0)},e.restoreTimeout)},O=function(){e.autoplay&&(clearInterval(u),clearTimeout(h))},j=function(){e.autoplay&&(h=setTimeout(function(){F(),u=setInterval(F,e.autoplayPause)},e.autoplayRestore))};T()})};